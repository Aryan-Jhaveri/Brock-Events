<!DOCTYPE html>
<html lang="en">

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Event Calendar</title>
  <!-- Include jQuery, moment.js, and FullCalendar -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
  <!-- Include your custom script.js -->
  <script defer src="script.js"></script>
</head>

<body>
  <h1>Event Calendar</h1>



  <!-- Add a week selector dropdown -->
  <label for="week-selector">Select Week: </label>
  <select id="week-selector">
    <!-- Populate this dropdown dynamically if needed -->
    <option value="week1">Week 1</option>
    <option value="week2">Week 2</option>
    <!-- Add more options as needed -->
  </select>
  <!-- Add a button to fetch events -->
  <button id="fetch-button">Fetch Events</button>
  <!-- Table to display events -->
  <table id="events-table">
    <thead>
      <tr>
        <th>Title</th>
        <th>Description</th>
        <th>Start Time</th>
        <th>End Time</th>
        <th>Link</th>
      </tr>
    </thead>
    <tbody id="events-body">
      <!-- Events will be dynamically added here -->
    </tbody>
  </table>

<!-- ... (your HTML code above) ... -->

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const fetchButton = document.getElementById('fetch-button');
    const weekSelector = document.getElementById('week-selector');

    if (fetchButton && weekSelector) {
      fetchButton.addEventListener('click', fetchAndDisplayEvents);
      // Populate the week selector with dynamically generated options
      populateWeekSelector(weekSelector);
    } else {
      console.error('Fetch button or week selector not found.');
    }

    function fetchAndDisplayEvents() {
      const selectedWeek = weekSelector.value;
      // Make an AJAX request to the RSS feed for the selected week
      $.ajax({
        url: `https://experiencebu.brocku.ca/events.rss?week=${selectedWeek}`,
        method: 'GET',
        dataType: 'xml',
        success: function (data) {
          // Parse the RSS feed and extract events
          const events = parseRSS(data);
          // Display events in the table
          displayEventsInTable(events);
        },
        error: function (error) {
          console.error('Error fetching RSS feed:', error);
        }
      });
    }

    // ... (rest of your JavaScript code) ...
  </script>
</body>

</html>

